(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t){var r=t.cardData,n=t.cardTemplateSelector,o=t.handleCardClick,i=t.handleCardDelete,a=t.likeFunction,c=t.unlikeFunction,u=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._image=r.link,this._header=r.name,this._cardId=r._id,this._cardLikes=r.likes,this._cardOwnerId=r.owner._id,this._cardTemplateSelector=n,this._handleCardClick=o,this._handleCardDelete=i,this._likeFunction=a.bind(this),this._unlikeFunction=c.bind(this),this._myId=u}var r,n;return r=e,(n=[{key:"_updateLikesView",value:function(e){this._cardLikesCounter.textContent="".concat(e.length),this._isLiked()?this._likeBtn.classList.add("elements__like_active"):this._likeBtn.classList.remove("elements__like_active")}},{key:"likesChange",value:function(e){this._cardLikes=e.likes,this._updateLikesView(this._cardLikes)}},{key:"_isLiked",value:function(){var e=this;return this._cardLikes.some((function(t){return t._id===e._myId}))}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplateSelector).content.querySelector(".elements__card").cloneNode(!0)}},{key:"_likeCard",value:function(){this._likeFunction()}},{key:"_cancelLike",value:function(){this._unlikeFunction()}},{key:"_setEventListeners",value:function(){var e=this;this._trashBtn.addEventListener("click",(function(){e._handleCardDelete(e._cardId)})),this._likeBtn.addEventListener("click",(function(){e._likeBtn.classList.contains("elements__like_active")?e._cancelLike():e._likeCard()})),this._imageEl.addEventListener("click",(function(){return e._handleCardClick(e._header,e._image)}))}},{key:"deleteCard",value:function(){this._cardElement.remove()}},{key:"generateCard",value:function(){return this._cardElement=this._getTemplate(),this._likeBlock=this._cardElement.querySelector(".elements__like-block"),this._likeBtn=this._likeBlock.querySelector(".elements__like"),this._cardLikesCounter=this._likeBlock.querySelector(".elements__likes-counter"),this._cardLikesCounter.textContent="".concat(this._cardLikes.length),this._isLiked()&&this._likeBtn.classList.add("elements__like_active"),this._trashBtn=this._cardElement.querySelector(".elements__trash-btn"),this._cardOwnerId!=this._myId&&(this._trashBtn.style.display="none"),this._imageEl=this._cardElement.querySelector(".elements__image"),this._nameEl=this._cardElement.querySelector(".elements__header"),this._imageEl.src=this._image,this._imageEl.alt=this._header,this._nameEl.textContent=this._header,this._setEventListeners(),this._cardElement}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apiUrl=t.apiUrl,this._headers=t.headers}var t,r;return t=e,(r=[{key:"_responseCheck",value:function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(res.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._apiUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._responseCheck)}},{key:"getInitialCardList",value:function(){return fetch("".concat(this._apiUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._responseCheck)}},{key:"patchProfile",value:function(e){return fetch("".concat(this._apiUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.link})}).then(this._responseCheck)}},{key:"patchAvatar",value:function(e){return fetch("".concat(this._apiUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this._responseCheck)}},{key:"postCard",value:function(e){return fetch("".concat(this._apiUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._responseCheck)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._apiUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._responseCheck)}},{key:"putLike",value:function(e){return fetch("".concat(this._apiUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._responseCheck)}},{key:"cancelLike",value:function(e){return fetch("".concat(this._apiUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._responseCheck)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._formSelector=t.formSelector,this._formToValidate=r,this._submitButton=r.querySelector(t.submitBtnSelector),this._submitButtonDisabledSelector=t.submitButtonDisabledSelector,this._popupInputErrorSelector=t.popupInputErrorSelector,this._inputErrorClass=t.inputErrorClass,this._errorElement=document.querySelector(this._popupInputErrorSelector),this._errorMessage=t.errorMessage,this._formInputs=Array.from(r.querySelectorAll(this._inputSelector))}var t,r;return t=e,(r=[{key:"_hasInvalidInput",value:function(){return this._formInputs.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.add(this._submitButtonDisabledSelector),this._submitButton.setAttribute("disabled",!0)):(this._submitButton.classList.remove(this._submitButtonDisabledSelector),this._submitButton.removeAttribute("disabled",!0))}},{key:"_showErrorMessage",value:function(e){var t=this._formToValidate.querySelector(".".concat(e.id,"-error"));t.classList.add(this._popupInputErrorSelector),t.style.visibility="visible",e.classList.add(this._inputErrorClass),t.textContent=this._errorMessage}},{key:"_hideErrorMessage",value:function(e){var t=this._formToValidate.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._popupInputErrorSelector),t.textContent=""}},{key:"_isValid",value:function(e){e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e)}},{key:"_setInputEventListeners",value:function(){var e=this;this._formInputs.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState(),e._isValid(t)}))}))}},{key:"enableValidation",value:function(){this._setInputEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._formInputs.forEach((function(t){e._hideErrorMessage(t)}))}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===l(o)?o:String(o)),n)}var o}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),this._popup.classList.add("popup_emerging"),window.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),window.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&e.close(),t.target.classList.contains("popup__close-button")&&e.close()}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},d.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._scaledImage=t._popup.querySelector(".popup__image-scaled"),t._scaledImageHeader=t._popup.querySelector(".popup__header-scaled"),t}return t=a,(r=[{key:"open",value:function(e,t){d(b(a.prototype),"open",this).call(this),this._scaledImage.src=t,this._scaledImageHeader.alt=e,this._scaledImageHeader.textContent=e}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(f);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(i,e);var t,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(n){var o=w(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return g(this,e)});function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(f),O={formSelector:".popup__form",inputSelector:".popup__input",submitBtnSelector:".popup__submit-button",submitButtonDisabledSelector:"popup__submit-button-disabled",popupInputErrorSelector:"popup__input-error",inputErrorClass:"popup__input_type_error",errorMessage:"А ну-ка заполни правильно"},C=".popup_avatar",P=".popup_add-card",j=".popup_delete-card",L=document.querySelector(".profile__avatar"),I=document.querySelector(".profile__avatar-edit"),T=document.querySelector(C),q=document.querySelector(".popup__submit-button_del-card"),B=document.querySelector(".profile__edit-button"),A=document.querySelector(".popup_profile"),R=A.querySelector(".popup__form_profile"),D=T.querySelector(".popup__form_avatar"),V=A.querySelector(".popup__input_name"),U=A.querySelector(".popup__input_about"),x=document.querySelector(P),F=(document.querySelector(j),x.querySelector(".popup__form_card")),M=document.querySelector(".profile__add-button");function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===N(o)?o:String(o)),n)}var o}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=G(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},J.apply(this,arguments)}function G(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function $(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(n);if(o){var r=Q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $(this,e)});function a(e){var t,r=e.popupSelector,n=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,r))._handleFormSubmit=n.bind(K(t)),t._form=t._popup.querySelector(".popup__form"),t._formSmbtButton=t._form.querySelector(".popup__submit-button"),t._inputList=Array.from(t._form.querySelectorAll(".popup__input")),t.close=t.close.bind(K(t)),t}return t=a,(r=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"indicateProgress",value:function(e){this._formSmbtButton.textContent=e?"Сохраняем...":"Сохранить"}},{key:"close",value:function(){J(Q(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;J(Q(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(f);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==X(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===X(o)?o:String(o)),n)}var o}var Z=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e,t){var r=this;e.forEach((function(e){r._renderer(e,t)}))}}])&&Y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ee(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ee(o)?o:String(o)),n)}var o}var re=function(){function e(t){var r=t.profileNameSelector,n=t.profileAboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=document.body.querySelector(r),this._userAboutELement=document.body.querySelector(n),this._userAvatarElement=document.body.querySelector(o)}var t,r;return t=e,r=[{key:"setMyAvatar",value:function(e){this._userAvatarElement.src=e}},{key:"getUserInfo",value:function(){return{collectedName:this._userNameElement.textContent,collectedAbout:this._userAboutELement.textContent,collectedAvatar:this._userAvatarElement.src}}},{key:"setUserInfo",value:function(e){var t=e.nameToSet,r=e.infoToSet;this._userNameElement.textContent=t,this._userAboutELement.textContent=r}}],r&&te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oe(e){var t=this;ye.open(),q.addEventListener("click",(function(){ue.deleteCard(e).then((function(){t.deleteCard(),ye.close()})).catch((function(e){return console.log("Ошибка.....: ".concat(e))}))}))}function ie(){var e=this;ue.putLike(this._cardId).then((function(t){e.likesChange(t)})).catch((function(e){return console.log("Ошибка.....: ".concat(e))}))}function ae(){var e=this;ue.cancelLike(this._cardId).then((function(t){e.likesChange(t)})).catch((function(e){return console.log("Ошибка.....: ".concat(e))}))}function ce(e,t){var n=e.cardData,o=e.userId;return new r({cardData:n,cardTemplateSelector:t,handleCardClick:function(e,t){le.open(e,t)},handleCardDelete:oe,likeFunction:ie,unlikeFunction:ae,userId:o}).generateCard()}var ue=new i({apiUrl:"https://mesto.nomoreparties.co/v1/cohort-57",headers:{authorization:"a59f181f-9e88-4a95-85fe-0e1fbe79e01c","Content-Type":"application/json"}}),le=new v(".popup_scaled"),se=new u(O,R),fe=new u(O,F),pe=new u(O,D),ye=new E(j),de=new re({profileNameSelector:".profile__name",profileAboutSelector:".profile__about",avatarSelector:".profile__avatar"}),he=new W({popupSelector:".popup_profile",handleFormSubmit:function(e){he.indicateProgress(!0),ue.patchProfile(e).then((function(){de.setUserInfo({nameToSet:e.name,infoToSet:e.link}),he.close()})).catch((function(e){return console.log("Ошибка:".concat(e))})).finally(he.indicateProgress(!1))}}),me=new W({popupSelector:C,handleFormSubmit:function(e){me.indicateProgress(!0),ue.patchAvatar(e).then((function(e){de.setMyAvatar(e.avatar),me.close()})).catch((function(e){return console.log("Ошибка:".concat(e))})).finally((function(){me.indicateProgress(!1)}))}}),_e=new Z({renderer:function(e,t){var r=ce({cardData:e,userId:t},"#card-template");_e.addItem(r)}},".elements__list"),be=new W({popupSelector:P,handleFormSubmit:function(e){be.indicateProgress(!0),ue.postCard(e).then((function(e){var t=ce({cardData:e,userId:e.owner._id},"#card-template");_e.addItem(t)})).then((function(){be.close()})).catch((function(e){return console.log("Ошибка.....: ".concat(e))})).finally(be.indicateProgress(!1))}}),ve=[ue.getUserInfo(),ue.getInitialCardList()];Promise.all(ve).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];de.setUserInfo({nameToSet:o.name,infoToSet:o.about}),de.setMyAvatar(o.avatar);var a=o._id;_e.renderItems(i,a)})).catch((function(e){return console.log("Ошибка.....: ".concat(e))})),le.setEventListeners(),ye.setEventListeners(),me.setEventListeners(),se.enableValidation(),fe.enableValidation(),pe.enableValidation(),M.addEventListener("click",(function(){fe.resetValidation(),be.open()})),B.addEventListener("click",(function(){he.open();var e=de.getUserInfo();V.value=e.collectedName,U.value=e.collectedAbout,se.resetValidation()})),I.addEventListener("click",(function(){T.classList.add("popup_opened"),pe.resetValidation()})),L.addEventListener("click",(function(){T.classList.add("popup_opened"),pe.resetValidation()})),he.setEventListeners(),be.setEventListeners()})();